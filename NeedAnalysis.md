<center>密级：公开</center> 

<center>编号：SE-EXP-DOC-2025-XX</center>



<center><b>文档名称：[软件需求规格说明书]</b></center>

<center><b>项目名称：[AI 代码审查与建议系统]</b></center>



| 编 制： | 吴芷铭【2330502151】、范乙丹【2220704131】 |
| :------ | :----------------------------------------: |
| 审 核： |                   郭雷勇                   |
| 批 准： |                   郭雷勇                   |

<center><b>广东药科大学 医药信息工程学院</b></center>	

<center><b>2025年10月08日</b></center>



版本信息：





## **一、引言**

### 1.1 编写目的

此文档旨在明确界定《AI代码审查与建议系统》的功能、非功能需求及运行环境，为开发、测试及项目验收提供基准，是项目相关人员沟通确认的依据。

### 1.2 项目背景

在计算机专业的学习与实践过程中，学生常常面临一个困境：编写的代码虽然能够运行，但其**质量、规范性、可维护性和安全性**却难以自我评估。传统的代码审查依赖于教师或同学的人工检查，效率低下且难以持续。

近年来，人工智能技术在自然语言处理和代码理解领域取得了显著进展，使得自动化、智能化的代码分析成为可能。与此同时，成熟的静态代码分析工具（如Pylint、Checkstyle）为自动化审查提供了可靠的基础。

因此，本项目旨在开发一个面向学生的**AI代码审查与建议系统**，将传统的静态分析工具与先进的AI模型相结合，为学生提供一个即时、易用、具有教育意义的代码质量反馈平台，帮助其培养良好的编程习惯，提升软件工程质量。

### 1.3 定义

- **AI 代码审查**：利用人工智能技术对源代码进行自动分析，识别潜在问题和改进点。
- **静态代码分析**：不执行程序代码，仅通过分析源代码的语法、结构、风格来发现问题的技术。
- **MVP（最小可行产品）**：指包含最核心功能、能够满足早期用户基本需求的初始产品版本。
- **代码质量指标**：衡量代码质量的一系列标准，通常包括可读性、可维护性、复杂度、安全性、规范性等。

### 1.4 参考资料

[1] Pressman, R. S., & Maxim, B. R. 《软件工程：实践者的研究方法》（原书第9版）. 机械工业出版社.
[2] 广东药科大学《软件工程》课程实验指导书与教学大纲.
[3] Martin, R. C. 《代码整洁之道》. 人民邮电出版社.
[4] SonarQube 官方文档. [Online] Available: https://docs.sonarqube.org/latest/
[5] Feng, Z., et al. "CodeBERT: A Pre-Trained Model for Programming and Natural Languages". arXiv preprint arXiv:2002.08155, 2020.



## 二、**总体描述**

### 2.1 产品愿景

**打造智能化的代码质量守护者，为学生开发者提供专业、即时、个性化的代码审查与改进建议，让每一行代码都经得起考验。**

------

### **愿景阐述**

在软件工程学习和实践过程中，代码质量是衡量学习成果和工程能力的重要标准。然而，学生在编写代码时往往缺乏专业的审查反馈，难以发现潜在的问题和改进空间。传统的人工代码审查耗时耗力，且受限于审查者的经验和时间。

我们的 AI 代码审查与建议系统旨在改变这一现状。我们不仅仅是一个静态代码分析工具，更是一个融合了人工智能技术的智能代码导师。系统能够：

- **专业审查，即时反馈**：基于成熟的静态分析工具和 AI 模型，对提交的代码进行多维度质量评估，提供即时、专业的审查结果。
- **个性化建议，学习导向**：不仅指出问题，更提供具体的改进建议和最佳实践示例，帮助学生理解问题根源，提升编程能力。
- **多语言支持，广泛适用**：支持主流编程语言的代码审查，满足不同课程项目和编程实践的需求。
- **积累经验，持续改进**：通过分析大量代码样本，系统能够不断优化审查模型，提供更加精准和有针对性的建议。

**我们的终极目标是**：让学生在编写代码后，能够快速获得专业的质量反馈，在不断的代码优化中培养良好的编程习惯和工程思维，为未来的软件开发工作奠定坚实基础。

### 2.2 用户画像 (Personas)

**Persona 1： 急于交作业的同学 - 李雷**

- **背景**：大二学生，正在赶制《数据结构》课程的编程作业。
- **核心痛点**：
  - 代码能跑通，但心里没底，不知道有没有隐藏的bug或风格问题。
  - 害怕因为代码不规范被扣分。
  - 没时间也没经验去配置复杂的代码检查工具。
- **需求与期望**：
  - **快速**：把代码粘贴进去，一键出结果。
  - **直观**：能直接看到错误在哪一行，以及怎么改。
  - **省心**：不需要安装、配置任何东西。

**Persona 2： 追求进步的学习者 - 韩梅梅**

- **背景**：希望写出更优雅、更专业代码的学生。
- **核心痛点**：
  - 看自己几个月前写的代码，觉得混乱不堪，但不知从何优化。
  - 想学习业界的最佳实践，但缺乏直接的反馈渠道。
  - 在小组项目中，希望统一团队的代码风格。
- **需求与期望**：
  - **学习**：不仅知道“错了”，更要知道“为什么错”以及“怎样更好”。
  - **比较**：希望看到代码修改前后的质量变化。
  - **细节**：需要关于代码结构、设计模式层面的深度建议。

**Persona 3： 项目演示的听众 - 课程老师/评委**

- **背景**：审阅项目代码的质量和规范性。
- **核心痛点**：
  - 需要快速评估学生项目的代码工程水平。
- **需求与期望**：
  - **报告**：需要一份清晰、专业的代码质量评估报告作为评分参考。
  - **客观**：希望有一个相对客观的工具来辅助判断，减少主观差异。

### 2.3 约束与假设

#### **约束条件**

1. **技术约束**
   - 系统MVP阶段需优先支持Python语言，后续版本可扩展至Java等其它主流语言。
   - AI模型推理时间需控制在合理范围内（单次分析≤30秒）
   - 系统应具备基本的扩展性，便于后续集成新的分析工具
2. **资源约束**
   - 开发团队为在校学生，开发时间和计算资源有限
   - 系统初期部署于免费的公有云平台或个人开发环境，硬件资源有限
   - 项目预算为零，需使用开源工具和免费资源
3. **时间约束**
   - 项目需在本学期内完成MVP版本开发和测试
   - 需在课程结课前完成系统验收
4. **使用约束**
   - 单次提交的代码文件大小限制为10MB以内
   - 不支持需要编译运行的完整项目分析
   - 用户提交代码不得为空

#### **基本假设**

1. **用户能力假设**
   - 使用者具备基本的编程知识和代码理解能力
   - 用户能够理解系统给出的技术性建议和术语
2. **技术可行性假设**
   - 现有的开源代码分析工具能够满足基础审查需求
   - AI模型在训练数据上具备一定的准确性和泛化能力
3. **运行环境假设**
   - 系统运行期间网络连接稳定
   - 服务器资源能够支持并发用户的基本使用需求

## 三、**具体需求**

### 3.1 **功能需求**

#### 3.1.1 用户故事列表 (User Stories)

**Epic 1： 极简代码审查体验**

- **US-101**: 作为李雷，我希望可以直接在网页里粘贴代码并立即分析，这样我就能在交作业前快速检查。
- **US-102**: 作为李雷，我希望系统能自动检测我粘贴的代码是什么语言，这样我就不用手动选择。
- **US-103**: 作为任何用户，我希望审查结果能直接高亮标记出代码中的问题行，这样我就能一眼定位。

**Epic 2： 深度学习与改进**

- **US-201**: 作为韩梅梅，我希望系统能为每个问题提供“为什么这是问题”以及“如何修复”的详细解释，这样我就能从中学习。
- **US-202**: 作为韩梅梅，我希望系统能给出“坏味道”代码的重构建议，例如“这个方法太长，可以拆分为...”，来提升我的代码设计能力。
- **US-203**: 作为韩梅梅，我希望能够将重要的审查记录保存在当前设备上，以便我回顾自己的进步历程。


- - **验收标准**：

  1. 给定用户完成一次代码审查后，系统应自动将审查报告保存到浏览器的本地存储中。
  2. 给定用户进入“历史记录”页面，那么应能展示所有已保存的审查记录，并按时间倒序排列。
  3. 给定用户在同一台电脑的同一个浏览器中访问系统，那么之前保存的历史记录应持续存在并可查看。
  4. 给定用户清除了浏览器缓存或更换了设备/浏览器，那么之前保存的历史记录将无法再访问。

**Epic 3： 可展示的审查结果**

- **US-301**: 作为课程评委，我希望审查结果能生成一个简洁明了的摘要报告，包含总体评分和问题分类统计，方便我快速评估。
- **US-302**: 作为韩梅梅，我希望能将审查报告导出为PDF，这样我就可以把它放在项目报告里作为附件。

#### 3.1.2 **数据流图 (DFD)** (顶层图、0层图、必要的1层图)

**顶层图**

![顶层图](C:\Users\Noah arh\Documents\softwareEngineering\respository\pic\顶层图.png)

**0层图**



**1层图**



#### 3.1.3 **数据字典 (Data Dictionary)** (对DFD中数据流、数据存储、处理逻辑的详细定义）

| 数据流/存储名称  | 组成/结构说明                                                | 来源               | 去向                      |
| ---------------- | ------------------------------------------------------------ | ------------------ | ------------------------- |
| **用户提交代码** | `{代码内容: string, 文件类型: string, 语言: string, 提交时间: datetime}` | 用户               | 接收用户输入              |
| **分析请求**     | `{请求ID: string, 代码内容: string, 语言: string, 分析类型: array}` | 接收用户输入       | 代码分析与分发            |
| **静态分析请求** | `{任务ID: string, 代码内容: string, 语言: string, 规则集: array}` | 代码分析与分发     | 静态分析引擎              |
| **AI分析请求**   | `{任务ID: string, 代码片段: string, 语言: string, 分析维度: array}` | 代码分析与分发     | AI智能分析引擎            |
| **静态分析结果** | `{问题列表: List<{行号, 问题类型, 描述, 规则ID, 严重程度}>, 质量评分: float, 分析时间: datetime}` | 静态分析引擎       | 结果合成与报告生成        |
| **AI分析结果**   | `{建议列表: List<{代码范围, 问题描述, 改进建议, 置信度, 示例代码}>, 分析时间: datetime}` | AI智能分析引擎     | 结果合成与报告生成        |
| **综合审查报告** | `{报告ID: string, 总体评分: float, 问题统计: object, 详细问题: array, AI建议: array, 生成时间: datetime}` | 结果合成与报告生成 | 用户界面 / 浏览器本地存储 |
| **历史查询请求** | `{查询条件: object, 时间范围: string}`                       | 用户界面           | 浏览器本地存储            |
| **历史记录数据** | `List<{报告ID, 提交时间, 代码语言, 总体评分, 问题总数, 主要问题类型}>` | 结果合成与报告生成 | 浏览器本地存储            |
| **导出请求**     | `{报告ID: string, 导出格式: "pdf"|"excel"}`                  | 用户界面           | 结果合成与报告生成        |
| **导出文件**     | `PDF文件 | Excel文件`                                        | 结果合成与报告生成 | 用户界面                  |
| **错误响应**     | `{错误码: string, 错误信息: string, 建议操作: string}`       | 所有处理逻辑       | 用户界面                  |

| **数据存储名称** | **组成/结构说明**                                       | **存储方式**       |
| ---------------- | ------------------------------------------------------- | ------------------ |
| **审查历史**     | `List<{用户标识, 历史记录: array<报告摘要对象>}>`       | 浏览器localStorage |
| **AI模型文件**   | `{模型文件: binary, 配置文件: json, 词汇表: object}`    | 服务器文件系统     |
| **规则配置**     | `{语言规则: object, 检查规则: array, 权重配置: object}` | 配置文件           |

#### 3.1.4 **用例图 (Use Case Diagram)**

![用例图](.\pic\用例图.png)

#### 3.1.5 **活动图 (Activity Diagram)** (对关键业务流程建模)

![活动图](.\pic\活动图.png)

### 3.2 **非功能性需求**

#### 3.2.1 性能需求 (响应时间、并发用户数)

- **响应时间**：代码审查操作应在30秒内完成并返回结果
- **并发支持**：系统应支持至少20个用户同时在线使用
- **吞吐量**：在高峰期应能处理每分钟10次代码审查请求
- **资源使用**：单次代码分析内存占用不超过2GB

#### 3.2.2 安全性需求 (认证、授权、数据加密)

- **身份认证**：系统主要功能无需用户登录即可使用。用户的审查记录可临时保存在浏览器本地。
- **数据保护**：用户代码在传输过程中应使用HTTPS进行加密
- **隐私保护**：系统不会长期存储用户的源代码，仅保存审查报告的元数据（如问题统计、评分等）
- **数据声明周期**：用户提交的源代码仅在审查过程中临时存在于服务器内存中，处理完成后立即清除，不写入持久化存储

#### 3.2.3 可用性需求 (用户界面友好性)

- **界面友好**：界面设计简洁直观，符合学生使用习惯
- **操作简便**：主要功能应在3次点击内完成
- **错误处理**：提供清晰的操作指引和错误提示信息
- **多平台支持**：支持主流浏览器访问，响应式设计适应不同设备

#### 3.2.4 可靠性需求 (系统稳定性、故障恢复)

- **系统可用性**：在开发演示期间，尽力保证核心功能稳定可用。
- **服务可靠性**：后端API服务应具备良好的容错能力，单次分析失败不应导致服务崩溃。
- **故障恢复**：在发现故障后，开发者应尽快进行手动恢复（如重启Docker容器）。
- **数据备份**：由于采用无状态架构，无需备份用户业务数据。需备份的仅为应用程序代码与AI模型文件。

### 3.3 **接口需求**

#### 3.3.1 用户接口

- **Web界面**：基于Web的响应式用户界面，支持中文显示
- **代码编辑器**：集成在线代码编辑器，支持语法高亮
- **结果可视化**：使用图表展示代码质量评分和问题分布
- **报告导出**：支持将审查结果导出为PDF或Excel格式

#### 3.3.2 外部接口 (与其他系统或AI服务的交互)

- **静态分析工具接口**：
  - Pylint（Python代码分析）。【注：Java（Checkstyle）和JavaScript（ESLint）支持作为后续迭代目标】
- **AI服务接口**：
  - **本地部署**：CodeBERT等预训练模型将在服务器本地加载和运行，通过Hugging Face `transformers` 库调用
  - **模型管理**:AI模型文件将存储在服务器本地文件系统，首次使用时会自动下载或预置
  - **网络要求**：生产环境服务器需要具备稳定的互联网连接，用于模型初始下载和更新
- **数据存储接口**：
  - **服务器本地文件系统接口**（用于存储和加载预训练的AI模型文件）

## 四、**运行环境规定**

### 4.1 硬件环境

- **服务器配置**：
  - CPU：4核以上
  - 内存：8GB以上
  - 硬盘：100GB以上（SSD推荐）
  - 网络：100Mbps以上带宽
- **客户端要求**：
  - 支持Chrome、Firefox、Edge等主流浏览器
  - 屏幕分辨率：1366×768以上

### 4.2 软件环境

#### 	4.2.1 开发环境

- **本地开发操作系统**：Windows 11（推荐使用 WSL2 以获得更好的 Linux 兼容性）
- **容器化开发环境**：使用 Docker Desktop 创建 Ubuntu 20.04 LTS 容器，确保开发与生产环境一致性
- **开发工具**：VS Code（推荐使用 Dev Containers 扩展）、PyCharm、Git
- **后端**：Python 3.8+、Flask
- **前端**：Vue.js 3、Vite、Node.js
- **AI 模型**：PyTorch / TensorFlow、Transformers、CodeBERT

#### 4.2.2 生产环境

- **操作系统**：Ubuntu 20.04 LTS
- **AI模型部署**：预训练模型文件（如CodeBERT）将存储在服务器本地，通过Python `transformers`库直接调用
- **存储要求**：需预留至少5GB额外存储空间用于AI模型文件
- **内存要求**：AI模型推理需要额外2-4GB内存空间

### 4.3 网络环境

- **部署方案**：
  1. **本地运行模式（开发与演示）**：项目可在开发者的个人电脑上运行，局域网内的其他用户可通过 `http://[我的IP地址]:5000` 临时访问
  2. **云服务平台部署（MVP推荐）**：项目将使用Docker容器化部署至以下推荐平台：
     - **首选平台**：Railway - 对Docker支持良好，部署简单，适合学生项目
     - **备选平台**:Render - 提供免费的容器化部署服务
  3. **传统云服务器（进阶选项）**：如需更多自定义控制，可考虑：     
     -  阿里云/腾讯云学生机（需自行配置Docker环境）
- **访问方式**：用户通过标准HTTP/HTTPS协议，使用浏览器访问系统提供的公网URL或局域网IP地址。
- **API接口**：系统提供RESTful API接口，支持JSON数据格式。
- **安全考虑**：在公开部署时，应考虑配置HTTPS以加密数据传输。